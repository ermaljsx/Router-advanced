{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.execOnce = execOnce;\nexports.getLocationOrigin = getLocationOrigin;\nexports.getURL = getURL;\nexports.getDisplayName = getDisplayName;\nexports.isResSent = isResSent;\nexports.normalizeRepeatedSlashes = normalizeRepeatedSlashes;\nexports.loadGetInitialProps = loadGetInitialProps;\nexports.formatWithValidation = formatWithValidation;\nexports.HtmlContext = exports.ST = exports.SP = exports.urlObjectKeys = void 0;\n\nvar _react = require(\"react\");\n\nvar _formatUrl = require(\"./router/utils/format-url\");\n\nfunction execOnce(fn) {\n  let used = false;\n  let result;\n  return function () {\n    if (!used) {\n      used = true;\n      result = fn(...arguments);\n    }\n\n    return result;\n  };\n}\n\nfunction getLocationOrigin() {\n  const {\n    protocol,\n    hostname,\n    port\n  } = window.location;\n  return `${protocol}//${hostname}${port ? ':' + port : ''}`;\n}\n\nfunction getURL() {\n  const {\n    href\n  } = window.location;\n  const origin = getLocationOrigin();\n  return href.substring(origin.length);\n}\n\nfunction getDisplayName(Component) {\n  return typeof Component === 'string' ? Component : Component.displayName || Component.name || 'Unknown';\n}\n\nfunction isResSent(res) {\n  return res.finished || res.headersSent;\n}\n\nfunction normalizeRepeatedSlashes(url) {\n  const urlParts = url.split('?');\n  const urlNoQuery = urlParts[0];\n  return urlNoQuery // first we replace any non-encoded backslashes with forward\n  // then normalize repeated forward slashes\n  .replace(/\\\\/g, '/').replace(/\\/\\/+/g, '/') + (urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '');\n}\n\nasync function loadGetInitialProps(App, ctx) {\n  if (process.env.NODE_ENV !== 'production') {\n    var ref;\n\n    if ((ref = App.prototype) === null || ref === void 0 ? void 0 : ref.getInitialProps) {\n      const message = `\"${getDisplayName(App)}.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`;\n      throw new Error(message);\n    }\n  } // when called from _app `ctx` is nested in `ctx`\n\n\n  const res = ctx.res || ctx.ctx && ctx.ctx.res;\n\n  if (!App.getInitialProps) {\n    if (ctx.ctx && ctx.Component) {\n      // @ts-ignore pageProps default\n      return {\n        pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx)\n      };\n    }\n\n    return {};\n  }\n\n  const props = await App.getInitialProps(ctx);\n\n  if (res && isResSent(res)) {\n    return props;\n  }\n\n  if (!props) {\n    const message = `\"${getDisplayName(App)}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`;\n    throw new Error(message);\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (Object.keys(props).length === 0 && !ctx.ctx) {\n      console.warn(`${getDisplayName(App)} returned an empty object from \\`getInitialProps\\`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`);\n    }\n  }\n\n  return props;\n}\n\nconst urlObjectKeys = ['auth', 'hash', 'host', 'hostname', 'href', 'path', 'pathname', 'port', 'protocol', 'query', 'search', 'slashes'];\nexports.urlObjectKeys = urlObjectKeys;\n\nfunction formatWithValidation(url) {\n  if (process.env.NODE_ENV === 'development') {\n    if (url !== null && typeof url === 'object') {\n      Object.keys(url).forEach(key => {\n        if (urlObjectKeys.indexOf(key) === -1) {\n          console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n        }\n      });\n    }\n  }\n\n  return (0, _formatUrl).formatUrl(url);\n}\n\nconst SP = typeof performance !== 'undefined';\nexports.SP = SP;\nconst ST = SP && typeof performance.mark === 'function' && typeof performance.measure === 'function';\nexports.ST = ST;\n\nclass DecodeError extends Error {}\n\nexports.DecodeError = DecodeError;\nconst HtmlContext = (0, _react).createContext(null);\nexports.HtmlContext = HtmlContext;\n\nif (process.env.NODE_ENV !== 'production') {\n  HtmlContext.displayName = 'HtmlContext';\n}","map":{"version":3,"sources":["../../../shared/lib/utils.ts"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.execOnce = execOnce;\nexports.getLocationOrigin = getLocationOrigin;\nexports.getURL = getURL;\nexports.getDisplayName = getDisplayName;\nexports.isResSent = isResSent;\nexports.normalizeRepeatedSlashes = normalizeRepeatedSlashes;\nexports.loadGetInitialProps = loadGetInitialProps;\nexports.formatWithValidation = formatWithValidation;\nexports.HtmlContext = exports.ST = exports.SP = exports.urlObjectKeys = void 0;\nvar _react = require(\"react\");\nvar _formatUrl = require(\"./router/utils/format-url\");\nfunction execOnce(fn) {\n    let used = false;\n    let result;\n    return (...args)=>{\n        if (!used) {\n            used = true;\n            result = fn(...args);\n        }\n        return result;\n    };\n}\nfunction getLocationOrigin() {\n    const { protocol , hostname , port  } = window.location;\n    return `${protocol}//${hostname}${port ? ':' + port : ''}`;\n}\nfunction getURL() {\n    const { href  } = window.location;\n    const origin = getLocationOrigin();\n    return href.substring(origin.length);\n}\nfunction getDisplayName(Component) {\n    return typeof Component === 'string' ? Component : Component.displayName || Component.name || 'Unknown';\n}\nfunction isResSent(res) {\n    return res.finished || res.headersSent;\n}\nfunction normalizeRepeatedSlashes(url) {\n    const urlParts = url.split('?');\n    const urlNoQuery = urlParts[0];\n    return urlNoQuery// first we replace any non-encoded backslashes with forward\n    // then normalize repeated forward slashes\n    .replace(/\\\\/g, '/').replace(/\\/\\/+/g, '/') + (urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '');\n}\nasync function loadGetInitialProps(App, ctx) {\n    if (process.env.NODE_ENV !== 'production') {\n        var ref;\n        if ((ref = App.prototype) === null || ref === void 0 ? void 0 : ref.getInitialProps) {\n            const message = `\"${getDisplayName(App)}.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`;\n            throw new Error(message);\n        }\n    }\n    // when called from _app `ctx` is nested in `ctx`\n    const res = ctx.res || ctx.ctx && ctx.ctx.res;\n    if (!App.getInitialProps) {\n        if (ctx.ctx && ctx.Component) {\n            // @ts-ignore pageProps default\n            return {\n                pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx)\n            };\n        }\n        return {\n        };\n    }\n    const props = await App.getInitialProps(ctx);\n    if (res && isResSent(res)) {\n        return props;\n    }\n    if (!props) {\n        const message = `\"${getDisplayName(App)}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`;\n        throw new Error(message);\n    }\n    if (process.env.NODE_ENV !== 'production') {\n        if (Object.keys(props).length === 0 && !ctx.ctx) {\n            console.warn(`${getDisplayName(App)} returned an empty object from \\`getInitialProps\\`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`);\n        }\n    }\n    return props;\n}\nconst urlObjectKeys = [\n    'auth',\n    'hash',\n    'host',\n    'hostname',\n    'href',\n    'path',\n    'pathname',\n    'port',\n    'protocol',\n    'query',\n    'search',\n    'slashes', \n];\nexports.urlObjectKeys = urlObjectKeys;\nfunction formatWithValidation(url) {\n    if (process.env.NODE_ENV === 'development') {\n        if (url !== null && typeof url === 'object') {\n            Object.keys(url).forEach((key)=>{\n                if (urlObjectKeys.indexOf(key) === -1) {\n                    console.warn(`Unknown key passed via urlObject into url.format: ${key}`);\n                }\n            });\n        }\n    }\n    return (0, _formatUrl).formatUrl(url);\n}\nconst SP = typeof performance !== 'undefined';\nexports.SP = SP;\nconst ST = SP && typeof performance.mark === 'function' && typeof performance.measure === 'function';\nexports.ST = ST;\nclass DecodeError extends Error {\n}\nexports.DecodeError = DecodeError;\nconst HtmlContext = (0, _react).createContext(null);\nexports.HtmlContext = HtmlContext;\nif (process.env.NODE_ENV !== 'production') {\n    HtmlContext.displayName = 'HtmlContext';\n}\n\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}